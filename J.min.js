if("undefined"==typeof J)window.J=new Object;else if("object"!=typeof J)throw"J global variable already exists";!function(){var e=["XMLHttpRequest not support","JSON error","Request error","Send error",", code: "];J=function(e){var t=document.querySelectorAll(e,null);return null===t||void 0===t[0]?null:t[0]},J.Ready=function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)},J.isUndefined=function(e){return void 0===e||null===e},J.GetJSON=function(t,n){if(window.XMLHttpRequest){var i=new XMLHttpRequest;i.open("GET",t,!0),i.onload=function(){if(i.status>=200&&i.status<400){var t;try{t=JSON.parse(i.responseText)}catch(t){n(e[2]+t,!1)}null==t?n(e[1],!1):n(t,!0)}else n(e[2]+e[4]+i.status,!1)},i.onerror=function(){n(e[2],!1)},i.send()}else n(e[0],!1)},J.SendJSON=function(t,n,i){if(window.XMLHttpRequest){var r;try{r=JSON.stringify(n)}catch(t){i(e[3]+t,!1)}var o=new XMLHttpRequest;o.open("POST",t,!0),o.setRequestHeader("Content-Type","application/json"),o.onerror=function(){i(e[3]+e[4]+o.status,!1)},o.send(r)}else i(e[0],!1)},HTMLElement.prototype.On||(HTMLElement.prototype.On=function(e,t){J.isUndefined(this)||(J.isUndefined(this.addEventListener)?J.isUndefined(this.attachEvent)?this["on"+e]=t():this.attachEvent("on"+e,t):this.addEventListener(e,t,!1))}),HTMLElement.prototype.Off||(HTMLElement.prototype.Off=function(e,t){J.isUndefined(this)||(J.isUndefined(this.removeEventListener)?J.isUndefined(this.detachEvent)?this["on"+e]=null:this.detachEvent("on"+e,t):this.removeEventListener(e,t,!1))}),HTMLElement.prototype.FadeIn||(HTMLElement.prototype.FadeIn=function(e){if(J.isUndefined(this))return null;var t=this;return t.style.opacity=0,t.style.display=e||"block",function e(){var n=parseFloat(t.style.opacity);(n+=.02)>1||(t.style.opacity=n,requestAnimationFrame(e))}(),this}),HTMLElement.prototype.FadeOut||(HTMLElement.prototype.FadeOut=function(){if(J.isUndefined(this))return null;var e=this;return e.style.opacity=1,function t(){(e.style.opacity-=.05)<0?e.style.display="none":requestAnimationFrame(t)}(),this}),HTMLElement.prototype.Css||(HTMLElement.prototype.Css=function(e,t){if(J.isUndefined(this))return null;var n=getComputedStyle(this,null);return J.isUndefined(e)||J.isUndefined(t)?n:(n[e]=t,this.setAttribute("style",n),n)}),HTMLElement.prototype.AddClass||(HTMLElement.prototype.AddClass=function(e){return J.isUndefined(this)?null:(this.classList?this.classList.add(e):this.className+=" "+e,this)}),HTMLElement.prototype.RemoveClass||(HTMLElement.prototype.RemoveClass=function(e){return J.isUndefined(this)?null:(this.classList&&this.classList.remove(e),this)}),HTMLElement.prototype.ToggleClass||(HTMLElement.prototype.ToggleClass=function(e){return J.isUndefined(this)?null:(this.classList&&this.classList.toggle(e),this)}),HTMLElement.prototype.HasClass||(HTMLElement.prototype.HasClass=function(e){return!J.isUndefined(this)&&(!!this.classList&&this.classList.contains(e))}),HTMLElement.prototype.Hide||(HTMLElement.prototype.Hide=function(){return J.isUndefined(this)?null:(this.style.display="none",this)}),HTMLElement.prototype.Show||(HTMLElement.prototype.Show=function(){return J.isUndefined(this)?null:(this.style.display="block",this)}),HTMLElement.prototype.Find||(HTMLElement.prototype.Find=function(e){return J.isUndefined(this)?null:this.querySelectorAll(e)}),HTMLElement.prototype.Html||(HTMLElement.prototype.Html=function(e){return J.isUndefined(this)?null:(this.innerHTML=e||"",this.innerHTML)}),HTMLElement.prototype.HtmlAppend||(HTMLElement.prototype.HtmlAppend=function(e){return J.isUndefined(this)?null:(this.innerHTML+=e||"",this.innerHTML)}),HTMLElement.prototype.Text||(HTMLElement.prototype.Text=function(){return J.isUndefined(this)?null:this.textContent}),HTMLElement.prototype.Before||(HTMLElement.prototype.Before=function(e){return J.isUndefined(this)?null:(this.insertAdjacentHTML("beforebegin",e),this)}),HTMLElement.prototype.After||(HTMLElement.prototype.After=function(e){return J.isUndefined(this)?null:(this.insertAdjacentHTML("afterend",e),this)}),String.prototype.ReplaceAll||(String.prototype.ReplaceAll=function(e,t){return J.isUndefined(this)?null:this.replace(new RegExp(e,"g"),t)}),HTMLElement.prototype.Template||(HTMLElement.prototype.Template=function(e){if(J.isUndefined(this))return null;return function e(t,n,i){i=i||"";for(var r in t)t.hasOwnProperty(r)&&(n="object"==typeof t[r]?e(t[r],n,i+"."+r):n.ReplaceAll("{{"+i+"."+r+"}}",t[r]));return n}(e,this.innerHTML)}),HTMLElement.prototype.FormToObject||(HTMLElement.prototype.FormToObject=function(){if("object"!=typeof this&&"FORM"!==this.nodeName)return null;for(var e,t=this.elements,n={},i=0;i<t.length;i++)if(!(e=t[i]).disabled&&e.value&&""!=e.value&&e.name&&e.name.length>0&&-1==["file","reset","submit","button"].indexOf(t[i].type)&&(-1==["checkbox","radio"].indexOf(t[i].type)||t[i].checked))if(-1!=["select-multiple"].indexOf(t[i].type))for(var r=t[i].options.length-1;r>=0;r--)t[i].options[r].selected&&(J.isUndefined(n[t[i].name])&&(n[t[i].name]=[]),-1==n[t[i].name].indexOf(t[i].options[r].value)&&n[t[i].name].push(t[i].options[r].value));else n[t[i].name]=t[i].value;return n}),HTMLElement.prototype.ObjectToForm||(HTMLElement.prototype.ObjectToForm=function(e,t){if("object"==typeof this){this.FormBuilder={form:null,onsubmit:null,cnt:0,options:e,styles:t};var n=this,i=function(e){return!(J.isUndefined(e.properties)||J.isUndefined(e.properties.title)||!e.properties.title)},r=function(e,t){s(e.properties,"name")||(e.properties.name=t+"-"+n.FormBuilder.cnt),s(e.properties,"id")||(e.properties.id=e.properties.name)},o=function(e){return!(J.isUndefined(e)||!Array.isArray(e)||!e.length)},s=function(e,t){return!(J.isUndefined(e[t])||!e[t])},l=function(e,t){for(var n=t.split(" "),i=0;i<n.length;i++)e.classList.add(n[i]);return e},p=function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(!t[i])continue;"style"===i?e.style.cssText=t[i]:"class"===i?l(e,t[i]):e.setAttribute(i,t[i])}return n&&!s(t,"class")&&l(e,n),e},d=function(e,t){if(i=t,J.isUndefined(i.title)||!i.title)return e;var i,r=document.createElement("div"),o=document.createElement("div");return s(n.FormBuilder.styles,"group")&&l(r,n.FormBuilder.styles.group),s(n.FormBuilder.styles,"label")&&l(o,n.FormBuilder.styles.label),J.isUndefined(t.required)||l(o,n.FormBuilder.styles.rlabel),o.appendChild(document.createTextNode(t.title)),r.appendChild(o),r.appendChild(e),r},u=function(e,t,n){var i=document.createElement(e);return p(i,t,n),i},a=function(e,t,n){var i=document.createElement("label");s(t.properties,"title")&&(i.appendChild(document.createTextNode(t.properties.title)),delete t.properties.title),s(t.properties,"id")||(s(t.properties,"name")?t.properties.id=t.properties.name+"-id":t.properties.id=t.properties.type+"-id"),i.setAttribute("for",t.properties.id);var r=u("input",t.properties,n);return e.appendChild(r),e.appendChild(i),e},m=function(e){if("object"==typeof e&&"string"==typeof e.type&&e.type){var t,p,m,c,f,h;switch(e.type){case"sring":h=s((f=e).properties,"type")?f.properties.type:"text",f.properties.type=h,r(f,h),t=d(u("input",f.properties,n.FormBuilder.styles.string),f);break;case"text":s((c=e).properties,"type")&&delete c.properties.type,r(c,"tarea"),t=d(u("textarea",c.properties,n.FormBuilder.styles.text),c);break;case"boolean":(m=e).properties.type="checkbox",r(m,m.properties.type),t=d(a(l(document.createElement("div"),n.FormBuilder.styles.xbox),m,n.FormBuilder.styles.boolean),m);break;case"enum":t=function(e){if(!o(e.enum))return null;var t=document.createElement("div");l(t,n.FormBuilder.styles.xbox);for(var r=0;r<e.enum.length;r++)if(i(e.enum[r])){s(e.enum[r].properties,"name")||(e.enum[r].properties.name="radio-"+n.FormBuilder.cnt);var p=e.enum[r];p.properties.id=e.enum[r].properties.name+"-"+r,p.properties.type="radio",p.title=p.properties.title,t=a(t,p,n.FormBuilder.styles.enum)}return d(t,e)}(e);break;case"select":t=function(e){if(!o(e.list))return null;s(e.properties,"type")&&delete e.properties.type,r(e,"sel");for(var t=u("select",e.properties,n.FormBuilder.styles.select),l=0;l<e.list.length;l++)if(i(e.list[l])){var p={},a=J.isUndefined(e.list[l].properties.title)||!e.list[l].properties.title?"_"+l:e.list[l].properties.title;p.value=J.isUndefined(e.list[l].properties.value)||!e.list[l].properties.value?a:e.list[l].properties.value,J.isUndefined(e.list[l].properties.selected)||(p.selected=!0),J.isUndefined(e.list[l].properties.disabled)||(p.disabled=!0);var m=u("option",p,null);m.appendChild(document.createTextNode(a)),t.appendChild(m)}return d(t,e)}(e);break;case"hidden":t=s((p=e).properties,"value")?(s(p.properties,"class")&&delete p.properties.class,p.properties.type="hidden",r(p,p.properties.type),u("input",p.properties,null)):null;break;case"button":r(e,"btn"),e.properties.type="button",t=u("input",e.properties,n.FormBuilder.styles.button);break;case"submit":e.properties.type="submit",t=u("input",e.properties,n.FormBuilder.styles.submit);break;case"reset":e.properties.type="reset",t=u("input",e.properties,n.FormBuilder.styles.reset);break;default:return}t&&n.FormBuilder.form.appendChild(t)}};if(o(this.FormBuilder.options.form)){if(this.FormBuilder.form=document.createElement("form"),J.isUndefined(this.FormBuilder.options.properties)?l(this.FormBuilder.form,this.FormBuilder.styles.form):p(this.FormBuilder.form,this.FormBuilder.options.properties,this.FormBuilder.styles.form),s(this.FormBuilder.options,"title")){var c=document.createElement("h3");c.appendChild(document.createTextNode(this.FormBuilder.options.title)),this.FormBuilder.form.appendChild(c)}for(;this.FormBuilder.cnt<this.FormBuilder.options.form.length;this.FormBuilder.cnt++)m(this.FormBuilder.options.form[this.FormBuilder.cnt]);this.appendChild(this.FormBuilder.form),delete this.FormBuilder.styles,"function"==typeof this.FormBuilder.options.onsubmit?(this.FormBuilder.onsubmit=this.FormBuilder.options.onsubmit,delete this.FormBuilder.options,this.FormBuilder.form.onsubmit=function(e){if(e=e||window.event,!n.FormBuilder.onsubmit)return!1;var t=n.FormBuilder.onsubmit(e,n.FormBuilder.form,n.FormBuilder.form.FormToObject());return!J.isUndefined(t)&&t}):delete this.FormBuilder.options}}})}();var Route={Name:["DNS","URL","&nbsp;IP&nbsp;"],Act:["/json/check/dns/","/json/check/url/","/json/check/ip/"],Templ:["#template-check-dns","#template-check-url","#template-check-ip"],Func:[function(e){return new RegExp("^(([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}?$","i").test(e)},function(e){return new RegExp("^(https?:\\/\\/)((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%@_.~+&:]*)*(\\?[;&a-z\\d%@_.,~+&:=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)},function(e){return new RegExp("^((\\d{1,3}\\.){3}\\d{1,3})?$","i").test(e)}],StrError:[", bad response format",", validate error"]};window.onload=function(){J.Ready(function(){AlertSetError=function(e,t,n,i){J("#in-error").Html(t),J("#in-type-hdr").Html(n),J("#in-type-err").Html(n+i),e.FadeIn()};var e=J("#check-form");J.isUndefined(e)||(e.onsubmit=function(t){t=t||window.event;var n=e.elements["src-type"],i=e.elements["in-check"].value,r=J("#in-warning"),o=J("#in-data");if(o.Html(),J.isUndefined(i)||""==i)return AlertSetError(r,"empty DNS, URL or IP string","input!",""),!1;for(var s=0;s<n.length;s++)if(n[s].checked){if(J("#act-text").Html(Route.Name[s]),!Route.Func[s](i)){AlertSetError(r,i,Route.Name[s],Route.StrError[1]);break}J("#in-type-hdr").Html(Route.Name[s]),J.GetJSON(Route.Act[s]+"?"+encodeURIComponent(i),function(e,t){if(t)switch(r.Hide(),s){case 0:case 1:o.Html(J(Route.Templ[s]).Template(e));break;case 2:var n=e,i=null;if(tmplip1=J(Route.Templ[s]),tmplip2=null,J.isUndefined(e.result)||(i=e.result,delete n.result,tmplip2=J(Route.Templ[s]+"-item")),o.Html(tmplip1.Template(n)),i&&tmplip2)for(var l=0;l<i.length;l++)o.HtmlAppend(tmplip2.Template(i[l]))}else AlertSetError(r,e,Route.Name[s],Route.StrError[0])});break}return!1},J("#in-warnclose").On("click",function(){J("#in-warning").FadeOut()}),J("#radio-0").On("click",function(){J("#act-text").Html(Route.Name[0])}),J("#radio-1").On("click",function(){J("#act-text").Html(Route.Name[1])}),J("#radio-2").On("click",function(){J("#act-text").Html(Route.Name[2])}));var t=J("#template-list-dns"),n=J("#template-list-url"),i=J("#template-list-download");J.isUndefined(t)||J.isUndefined(n)||J.GetJSON("/json/stat/db/",function(e,i){if(i){var r=J("#txt-templ-dns"),o=J("#txt-templ-url");J.isUndefined(r)||r.Html(t.Template(e.dnsfilter)),J.isUndefined(o)||o.Html(n.Template(e.urlfilter))}else AlertSetError(J("#in-warning"),e,i,", GetJSON (stat/db)")}),J.isUndefined(i)||J.GetJSON("/json/download/",function(e,t){if(t){var n=J("#txt-templ-download");if(J.isUndefined(n)||J.isUndefined(e.files))return;for(var r=0;r<e.files.length;r++)n.HtmlAppend(i.Template(e.files[r]))}else AlertSetError(J("#in-warning"),e,t,", GetJSON (download)")})})};